<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{{ provider.display_name }} | BLACKBOOK Private Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600;800&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --gold: #D4AF37;
            --black: #050505;
            --zinc: #111111;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--black);
            color: white;
            overscroll-behavior-y: none;
        }

        .serif {
            font-family: 'Cinzel', serif;
        }

        .gold-text {
            color: var(--gold);
        }

        .gold-bg {
            background-color: var(--gold);
        }

        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .profile-gradient {
            background: linear-gradient(to top, var(--black) 0%, rgba(5, 5, 5, 0.8) 20%, transparent 50%);
        }

        .pulse-green {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .about-collapsed {
            display: -webkit-box;
            -webkit-line-clamp: 6;
            -webkit-box-orient: vertical;
            overflow: hidden;
            position: relative;
        }

        .about-collapsed::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3rem;
            background: linear-gradient(to bottom, transparent, var(--black));
            pointer-events: none;
        }
    </style>
</head>

<body class="antialiased bg-black text-white">

    <!-- HEADER / NAVIGATION -->
    <nav
        class="fixed top-0 left-0 right-0 z-50 p-6 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent">
        <button onclick="history.back()" class="glass p-3 rounded-full hover:bg-white/10 transition-all">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
        </button>
        <div class="text-center">
            <h1 class="serif text-xl gold-text tracking-[0.3em]">BLACKBOOK</h1>
        </div>
        <a href="https://www.linkedin.com" class="glass p-3 rounded-full hover:bg-white/10 transition-all">
            <span class="text-[10px] uppercase font-black tracking-widest text-red-400">Exit</span>
        </a>
    </nav>

    <main class="max-w-4xl mx-auto pb-48">

        <!-- HERO GALLERY SECTION -->
        <div class="relative w-full aspect-[3/4] md:aspect-video overflow-hidden bg-[#050505]">
            <div id="galleryTrack" class="flex overflow-x-auto snap-x snap-mandatory h-full w-full no-scrollbar">
                {% for photo_url in provider.photo_urls %}
                <div class="relative flex-none w-full h-full snap-center" onclick="openLightbox({{ loop.index0 }})">
                    <img src="{{ photo_url }}" alt="Photo {{ loop.index }}"
                        class="absolute inset-0 w-full h-full object-cover">
                    <div class="absolute inset-0 profile-gradient"></div>
                </div>
                {% endfor %}
            </div>

            <!-- Pagination Indicators -->
            <div class="absolute top-24 left-1/2 -translate-x-1/2 flex gap-1 z-20 pointer-events-none">
                <div id="galleryDots"
                    class="flex gap-1.5 bg-black/20 backdrop-blur-md px-3 py-1.5 rounded-full border border-white/10">
                </div>
            </div>

            <!-- Floating Status -->
            <div class="absolute bottom-10 left-8 flex items-center gap-3">
                <div
                    class="h-3 w-3 {% if provider.is_online %}bg-green-500 pulse-green{% else %}bg-gray-500{% endif %} rounded-full">
                </div>
                <span
                    class="text-sm font-bold uppercase tracking-widest {% if provider.is_online %}text-green-500{% else %}text-gray-500{% endif %}">
                    {{ provider.availability_label if provider.is_online else "Offline" }}
                </span>
            </div>
        </div>

        <!-- PROFILE CONTENT -->
        <div class="px-8 -mt-6 relative z-10">
            <!-- Header section -->
            <div class="flex flex-col md:flex-row md:justify-between md:items-end gap-6">
                <div class="space-y-4">
                    <div class="flex items-center gap-3">
                        <span
                            class="gold-bg text-[9px] text-black px-3 py-0.5 rounded-sm font-black uppercase tracking-[0.2em]">Platinum
                            VIP</span>
                        <div
                            class="flex items-center text-[#00A3FF] text-[10px] font-bold gap-1 bg-white/5 px-2 py-0.5 rounded-full border border-white/5">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293l-4 4a1 1 0 01-1.414 0l-2-2a1 1 0 111.414-1.414L9 10.586l3.293-3.293a1 1 0 011.414 1.414z">
                                </path>
                            </svg>
                            Verified Identity
                        </div>
                    </div>
                    <h1 class="serif text-5xl md:text-8xl tracking-tighter leading-[0.9]">
                        {{ provider.display_name.split(' ')[0] }}{% if provider.age %}, {{ provider.age }}{% endif %}
                    </h1>
                    <p class="text-gray-400 font-light tracking-[0.2em] text-xs uppercase flex items-center gap-2">
                        <svg class="w-3 h-3 gold-text" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                            </path>
                        </svg>
                        {{ provider.primary_location }} &bull; {{ provider.neighborhood or "Private Location" }}
                    </p>
                </div>

                {% if provider.rate_cards %}
                <div class="bg-zinc-900 border border-white/5 p-6 rounded-3xl min-w-[180px]">
                    <p class="text-[9px] text-gray-500 uppercase tracking-[0.3em] mb-1">Honorarium Starts at</p>
                    <p class="serif text-3xl gold-text">
                        {{ provider.rate_cards[0].amount }}<span class="text-xs ml-1">KES</span>
                    </p>
                </div>
                {% endif %}
            </div>

            {% set first_name = provider.display_name.split(' ')[0] if provider.display_name else 'Provider' %}
            {% set gender = provider.get('gender') or 'Female' %}
            {% set orientation = provider.get('sexual_orientation') or 'Straight' %}
            {% set nationality = provider.get('nationality') or 'Kenyan' %}
            {% set county = provider.get('county') or provider.get('city') or 'ASK' %}
            {% set city_town = provider.get('city') or 'ASK' %}
            {% set location = provider.get('neighborhood') or provider.get('primary_location') or 'ASK' %}
            {% set services_text = provider.services_list | join(' ') if provider.services_list else 'ASK' %}
            {% set incalls_from = provider.get('incalls_from') or provider.get('incall_rate_1hr') or 'ASK' %}
            {% set outcalls_from = provider.get('outcalls_from') or provider.get('outcall_rate_1hr') or 'ASK' %}
            {% set contact_number = provider.get('phone') or provider.get('phone_digits') or 'ASK' %}
            {% set top_service = provider.services_list[0] if provider.services_list else 'GFE' %}
            {% set second_service = provider.services_list[1] if provider.services_list|length > 1 else 'BJ' %}
            {% set uploaded_photos = provider.get('profile_photos') or [] %}
            {% set extra_photos = uploaded_photos[1:] if uploaded_photos|length > 1 else [] %}
            {% set video_url = provider.get('video_url') or provider.get('video') or '' %}

            <!-- PROFILE DETAILS -->
            <div class="mt-12 glass rounded-3xl p-6 border border-white/10">
                <h3 class="serif text-xl gold-text tracking-[0.2em] uppercase mb-5">Profile Details</h3>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-3">
                    <div class="flex items-center justify-between border-b border-white/5 pb-2">
                        <span class="text-xs uppercase tracking-[0.16em] text-gray-400 font-semibold">Gender</span>
                        <span class="text-sm font-semibold text-white">{{ gender }}</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-white/5 pb-2">
                        <span class="text-xs uppercase tracking-[0.16em] text-gray-400 font-semibold">Sexual Orientation</span>
                        <span class="text-sm font-semibold text-white">{{ orientation }}</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-white/5 pb-2">
                        <span class="text-xs uppercase tracking-[0.16em] text-gray-400 font-semibold">Age</span>
                        <span class="text-sm font-semibold text-white">{{ provider.age or 'ASK' }}</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-white/5 pb-2">
                        <span class="text-xs uppercase tracking-[0.16em] text-gray-400 font-semibold">Nationality</span>
                        <span class="text-sm font-semibold text-white">{{ nationality }}</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-white/5 pb-2">
                        <span class="text-xs uppercase tracking-[0.16em] text-gray-400 font-semibold">County</span>
                        <span class="text-sm font-semibold text-white">{{ county }}</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-white/5 pb-2">
                        <span class="text-xs uppercase tracking-[0.16em] text-gray-400 font-semibold">City / Town</span>
                        <span class="text-sm font-semibold text-white">{{ city_town }}</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-white/5 pb-2">
                        <span class="text-xs uppercase tracking-[0.16em] text-gray-400 font-semibold">Location</span>
                        <span class="text-sm font-semibold text-white">{{ location }}</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-white/5 pb-2">
                        <span class="text-xs uppercase tracking-[0.16em] text-gray-400 font-semibold">Incalls per hour from</span>
                        <span class="text-sm font-semibold text-white">{% if incalls_from == 'ASK' %}ASK{% else %}{{ incalls_from }}{% endif %}</span>
                    </div>
                    <div class="flex items-center justify-between border-b border-white/5 pb-2 md:col-span-2">
                        <span class="text-xs uppercase tracking-[0.16em] text-gray-400 font-semibold">Outcalls per hour from</span>
                        <span class="text-sm font-semibold text-white">{% if outcalls_from == 'ASK' %}ASK{% else %}{{ outcalls_from }}{% endif %}</span>
                    </div>
                </div>

                <div class="mt-5">
                    <p class="text-xs uppercase tracking-[0.16em] text-gray-400 font-semibold mb-2">Services</p>
                    <p class="text-sm leading-relaxed text-white">{{ services_text }}</p>
                </div>
            </div>

            <!-- ABOUT SECTION -->
            <div class="mt-16 glass rounded-3xl p-6 border border-white/10 space-y-5">
                <h3 class="serif text-xl gold-text tracking-[0.2em] uppercase">More about {{ first_name }}</h3>
                <p class="text-gray-300 leading-relaxed font-light text-base">
                    This is {{ first_name }}, she is a hot {{ provider.age or 'ASK' }} years old {{ nationality }} escort in {{ location }}.
                    She offers the best {{ services_text }}.
                    To communicate with {{ first_name }} you can contact her through her number {{ contact_number }} to arrange a meetup.
                    So if you are looking for a nice {{ top_service }} or just {{ second_service }} service then {{ first_name }} is your ideal escort.
                </p>
                <div class="flex flex-wrap gap-2 pt-1">
                    <span class="px-3 py-1 rounded-full bg-white/5 border border-white/10 text-[10px] uppercase tracking-[0.14em] text-gray-300">Location: {{ location }}</span>
                    <span class="px-3 py-1 rounded-full bg-white/5 border border-white/10 text-[10px] uppercase tracking-[0.14em] text-gray-300">{{ provider.availability_label or 'By booking' }}</span>
                    <span class="px-3 py-1 rounded-full bg-white/5 border border-white/10 text-[10px] uppercase tracking-[0.14em] text-gray-300">{{ provider.response_hint or 'Fast response' }}</span>
                </div>
                {% if provider.bio %}
                <p class="text-gray-400 leading-relaxed font-light text-sm italic about-collapsed"
                    onclick="this.classList.toggle('about-collapsed')">
                    "{{ provider.bio }}"
                </p>
                {% endif %}
            </div>

            <!-- MORE PICTURES -->
            <div class="mt-14 space-y-5">
                <h3 class="serif text-xl gold-text tracking-[0.2em] uppercase">More Pictures</h3>
                {% if extra_photos %}
                <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                    {% for photo_url in extra_photos %}
                    <div class="relative rounded-2xl overflow-hidden border border-white/10 bg-zinc-950">
                        <img src="{{ photo_url }}" alt="Additional photo {{ loop.index }}"
                            class="w-full h-40 md:h-48 object-cover">
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="glass rounded-2xl p-5 border border-white/10">
                    <p class="text-sm text-gray-300">No more pictures uploaded.</p>
                </div>
                {% endif %}
            </div>

            <!-- VIDEO -->
            <div class="mt-14 space-y-5">
                <h3 class="serif text-xl gold-text tracking-[0.2em] uppercase">Video</h3>
                {% if video_url %}
                <div class="glass rounded-2xl p-3 border border-white/10">
                    <video controls preload="metadata" class="w-full rounded-xl bg-black max-h-[420px]">
                        <source src="{{ video_url }}">
                        Your browser does not support the video tag.
                    </video>
                </div>
                {% else %}
                <div class="glass rounded-2xl p-5 border border-white/10">
                    <p class="text-sm text-gray-300">No video uploaded.</p>
                </div>
                {% endif %}
            </div>

            <!-- TRUST SECTION -->
            <div class="mt-16 p-8 glass rounded-[40px] border-gold-500/20">
                <div class="flex items-center gap-4 mb-4">
                    <div class="text-gold-500">
                        <svg class="w-6 h-6 gold-text" fill="currentColor" viewBox="0 0 20 20">
                            <path
                                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z">
                            </path>
                        </svg>
                    </div>
                    <h4 class="serif text-lg tracking-widest uppercase">Verified Trust</h4>
                </div>
                <p class="text-sm text-gray-500 leading-relaxed font-light">
                    {{ provider.display_name.split(' ')[0] }} has successfully completed our **Live Security Vetting**.
                    This profile represents an active, verified professional within our network. Discreet handling
                    guaranteed.
                </p>
            </div>
        </div>

        <!-- THE COLLECTION (Recommendations) -->
        {% if recommendations %}
        <section class="px-8 mt-24 mb-12 border-t border-white/5 pt-16">
            <div class="flex justify-between items-end mb-8">
                <div>
                    <h3 class="serif text-2xl tracking-tighter">The Collection</h3>
                    <p class="text-xs text-gray-500 uppercase tracking-widest mt-1">Other professionals in {{
                        provider.primary_location }}</p>
                </div>
                <a href="/"
                    class="text-[10px] gold-text font-bold uppercase tracking-widest border-b border-[#D4AF37]/30 pb-1">View
                    All</a>
            </div>

            <div class="flex overflow-x-auto gap-4 no-scrollbar pb-4 md:grid md:grid-cols-3">
                {% for rec in recommendations %}
                <div onclick="window.location.href='/contact/{{ rec.id }}'" class="min-w-[220px] group cursor-pointer">
                    <div class="relative aspect-[3/4] rounded-2xl overflow-hidden mb-3 border border-white/5">
                        <img src="{{ rec.photo_url }}"
                            class="w-full h-full object-cover opacity-80 group-hover:scale-105 transition-all">
                        {% if rec.is_premium_verified %}
                        <div class="absolute top-3 right-3 text-[#00A3FF]">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293l-4 4a1 1 0 01-1.414 0l-2-2a1 1 0 111.414-1.414L9 10.586l3.293-3.293a1 1 0 011.414 1.414z">
                                </path>
                            </svg>
                        </div>
                        {% endif %}
                    </div>
                    <h4 class="serif text-lg">{{ rec.display_name.split(' ')[0] }}, {{ rec.age or '??' }}</h4>
                    <p class="text-[10px] text-gray-500 uppercase tracking-widest">{{ rec.primary_location }} &bull; Premium
                        VIP</p>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- PROFESSIONAL FOOTER -->
        <section class="px-8 mt-12 mb-6 border-t border-white/10 pt-8">
            <div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-[11px] uppercase tracking-[0.14em] text-gray-400">
                <a href="/privacy" class="hover:text-white transition-colors">Privacy</a>
                <span class="text-white/20">&bull;</span>
                <a href="/terms" class="hover:text-white transition-colors">Terms</a>
                <span class="text-white/20">&bull;</span>
                <a href="/safety" class="hover:text-white transition-colors">Safety</a>
                <span class="text-white/20">&bull;</span>
                <a href="/provider" class="hover:text-white transition-colors">For Providers</a>
            </div>
            <p class="mt-3 text-xs text-gray-500">
                &copy; 2026 BLACKBOOK. Confidential introductions and private concierge connections.
            </p>
        </section>
    </main>

    <!-- FIXED CONVERSION ACTIONS -->
    <div class="fixed bottom-3 left-1/2 -translate-x-1/2 z-[60] w-[min(92vw,560px)]">
        <div class="rounded-2xl border border-white/10 bg-black/75 backdrop-blur-xl px-3 py-2 shadow-[0_20px_45px_rgba(0,0,0,0.45)]">
            <div class="flex items-center gap-2">
                <!-- Compact Call CTA -->
                <a href="{{ provider.call_url }}"
                    class="flex-1 h-14 rounded-xl flex items-center justify-between px-4 transition-all active:scale-[0.98] bg-gradient-to-b from-[#5BEA72] to-[#22C55E] text-black border border-[#6CFF92] shadow-[0_10px_24px_rgba(34,197,94,0.32)] hover:brightness-105">
                    <div class="flex flex-col leading-none">
                        <span class="text-[8px] uppercase tracking-[0.14em] text-black/70 font-bold mb-1">Call Now</span>
                        <h3 class="text-sm md:text-base font-black tracking-tight">Call {{ provider.display_name.split(' ')[0] if provider.display_name else 'Provider' }}</h3>
                    </div>
                    <img src="/static/icons/call.png" class="w-6 h-6 object-contain">
                </a>

                <!-- Compact Save Button -->
                <button type="button" onclick="toggleSave()"
                    class="w-12 h-12 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center transition-all active:scale-95 hover:bg-white/10 group">
                    <svg class="w-5 h-5 text-white/50 group-hover:text-white/70 transition-colors" id="saveIcon" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Lightbox (Zoom) -->
    <div id="lightbox" class="hidden fixed inset-0 z-50 bg-black/95 items-center justify-center p-4">
        <button type="button" class="absolute top-8 right-6 text-white text-xs uppercase tracking-[0.16em] font-black"
            onclick="closeLightbox()">âœ• Close</button>
        <button type="button" class="absolute left-2 top-1/2 -translate-y-1/2 text-white/80 text-4xl p-6"
            onclick="stepLightbox(-1)">&lsaquo;</button>
        <img id="lightboxImg" src="" alt="Zoomed photo"
            class="max-h-[86vh] max-w-[92vw] object-contain rounded-xl shadow-[0_0_40px_rgba(255,255,255,0.05)]">
        <button type="button" class="absolute right-2 top-1/2 -translate-y-1/2 text-white/80 text-4xl p-6"
            onclick="stepLightbox(1)">&rsaquo;</button>
    </div>

    <script>
        const galleryTrack = document.getElementById("galleryTrack");
        const galleryDots = document.getElementById("galleryDots");
        const galleryImages = {{ provider.photo_urls | tojson | safe }};
        let lightboxIndex = 0;

        // Custom Tinder/TikTok smooth pagination indicator
        function renderDots() {
            galleryDots.innerHTML = "";
            galleryImages.forEach((_, idx) => {
                const dot = document.createElement("div");
                dot.className = "h-1.5 rounded-full transition-all duration-300 " + (idx === 0 ? "w-6 bg-white" : "w-1.5 bg-white/40");
                galleryDots.appendChild(dot);
            });
        }

        function updateActiveDot() {
            if (!galleryTrack.clientWidth) return;
            const index = Math.round(galleryTrack.scrollLeft / galleryTrack.clientWidth);
            [...galleryDots.children].forEach((dot, idx) => {
                dot.className = "h-1.5 rounded-full transition-all duration-300 " + (idx === index ? "w-6 bg-white shadow-[0_0_8px_rgba(255,255,255,0.8)]" : "w-1.5 bg-white/40");
            });
        }

        if (galleryImages.length > 1) {
            galleryTrack.addEventListener("scroll", updateActiveDot, { passive: true });
            window.addEventListener("resize", updateActiveDot);
            renderDots();
            updateActiveDot();
        } else {
            document.getElementById("galleryDots").parentElement.style.display = 'none';
        }

        function openLightbox(index) {
            lightboxIndex = index;
            document.getElementById("lightboxImg").src = galleryImages[lightboxIndex];
            document.getElementById("lightbox").classList.remove("hidden");
            document.getElementById("lightbox").classList.add("flex");
        }

        function closeLightbox() {
            const lightbox = document.getElementById("lightbox");
            lightbox.classList.add("hidden");
            lightbox.classList.remove("flex");
        }

        function stepLightbox(step) {
            lightboxIndex = (lightboxIndex + step + galleryImages.length) % galleryImages.length;
            document.getElementById("lightboxImg").src = galleryImages[lightboxIndex];
        }

        // Save Profile Logic
        const saveIcon = document.getElementById("saveIcon");
        const storageKey = "bb-saved-profiles";
        const currentProfile = { id: {{ provider.id }}, name: { { provider.display_name | tojson | safe } }, location: { { provider.primary_location | tojson | safe } } };

        function readSaved() {
            try { return JSON.parse(localStorage.getItem(storageKey) || "[]"); }
            catch (_) { return []; }
        }

        function updateSaveState() {
            const saved = readSaved();
            const exists = saved.some((item) => item.id === currentProfile.id);
            if (exists) {
                saveIcon.setAttribute("fill", "#D4AF37");
                saveIcon.setAttribute("stroke", "#D4AF37");
                saveIcon.classList.remove("text-white/50");
            } else {
                saveIcon.setAttribute("fill", "none");
                saveIcon.setAttribute("stroke", "currentColor");
                saveIcon.classList.add("text-white/50");
            }
        }

        function toggleSave() {
            const saved = readSaved();
            const index = saved.findIndex((item) => item.id === currentProfile.id);
            if (index >= 0) saved.splice(index, 1);
            else saved.push(currentProfile);

            localStorage.setItem(storageKey, JSON.stringify(saved));

            // Pop animation
            const btn = saveIcon.parentElement;
            btn.style.transform = "scale(0.85)";
            setTimeout(() => btn.style.transform = "", 150);

            updateSaveState();
        }

        updateSaveState();
    </script>
</body>

</html>

